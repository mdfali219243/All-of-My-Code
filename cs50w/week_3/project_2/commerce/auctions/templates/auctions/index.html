{% extends "auctions/layout.html" %}

{% block body %}
<h2>Active Listings</h2>

{% if listings %} {# Checks if the 'listings' variable is not empty #}
<ul class="listings">
    {% for listing in listings %} {# Loops through each listing in the 'listings' QuerySet #}
    <li>
        <a href="{% url 'listing' listing.id %}">
            {% if listing.image_url %}
            <img src="{{ listing.image_url }}" alt="{{ listing.title }}" class="listing-thumbnail">
            {% else %}
            <img src="/static/auctions/placeholder.png" alt="No image available" class="listing-thumbnail">
            {% endif %}

            <div class="listing-info">
                <h3>{{ listing.title }}</h3>
                {# Assuming your Listing model has a get_current_bid method or property #}
                <p>Current Bid: ${{ listing.get_current_bid }}</p>
                <p>Category: {{ listing.category.name|default:"N/A" }}</p>
                {# <p>Category: {{ listing.category.category|default:"N/A" }}</p> #}
            </div>
        </a>
    </li>
    {% endfor %}
</ul>
{% else %}
<p>No active listings available at the moment.</p> {# Message if there are no active listings #}
{% endif %}

{% endblock %}